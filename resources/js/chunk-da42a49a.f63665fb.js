(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-da42a49a"],{"92c9":function(t,e,s){},"9e3d":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"player-wrapper"},[s("section",{staticClass:"player",attrs:{flex:"cross:center"}},[s("section",{staticClass:"player-basic",attrs:{"flex-item":"2"}},[s("section",{attrs:{flex:"cross:center"}},[s("i",{staticClass:"player-icon player-prev-icon",on:{click:function(e){t.handleSetSongIdx(parseInt(t.songIdx)-1)}}}),s("i",{staticClass:"player-icon",class:[!1===t.playStatus?"player-play-icon":"player-pause-icon"],on:{click:function(e){return t.handleSetPlayStatus(!t.playStatus)}}}),s("i",{staticClass:"player-icon player-end-icon",on:{click:function(e){t.handleSetSongIdx(parseInt(t.songIdx)+1)}}})])]),s("section",{staticClass:"player-progress",attrs:{"flex-item":"6"}},[s("section",{staticClass:"bar-time"},[t._v(t._s(parseInt(t.nowDuration/60))+" : "+t._s(parseInt(t.nowDuration%60))+" / "+t._s(parseInt(t.duration/60))+" : "+t._s(parseInt(t.duration%60)))]),s("section",{ref:"barTotal",staticClass:"bar-total"},[s("section",{ref:"barReal",staticClass:"bar-real"},[s("i",{ref:"barDot",staticClass:"bar-dot",on:{mousedown:t.mouseDown,touchsStart:function(e){return e.preventDefault(),t.mouseDown(e)}}})])])]),s("section",{staticClass:"player-special",attrs:{"flex-item":"2"}},[s("section",{attrs:{flex:"cross:center"}},[0!==t.nowDuration?s("router-link",{staticClass:"player-icon player-comment-icon",attrs:{to:"/song/comment?id="+t.songId,tag:"i"}}):t._e(),s("i",{staticClass:"player-icon",class:["single"===t.playType?"player-single-icon":"all"===t.playType?"player-all-icon":"player-default-icon"],on:{click:t.setType}}),t.userToken&&0!==t.nowDuration&&"/song/love"!==t.pagePath?s("i",{staticClass:"player-icon player-love-icon",on:{click:t.loveMusic}}):t._e(),t.userToken&&0!==t.nowDuration&&"/song/love"===t.pagePath?s("i",{staticClass:"player-icon player-delove-icon",on:{click:t.deloveMusic}}):t._e()],1)]),s("section",{staticClass:"player-voice",attrs:{"flex-item":"2"}})]),s("audio",{ref:"audio",attrs:{src:"http://admin.music.com"+t.song},on:{timeupdate:t.audioProcess,canplay:t.getDuration,ended:t.playEnd}})])},a=[],i=(s("96cf"),s("3b8d")),o=s("e814"),r=s.n(o),l=s("cebc"),c=(s("7f7f"),s("2f62")),u={name:"m1-footer",data:function(){return{dotWidth:10,musicSrc:"",move:{status:!1,startX:0,left:0},duration:0,nowDuration:0,pathName:""}},created:function(){this.pathName=this.$route.name},computed:Object(l["a"])({},Object(c["c"])("player/song",["songIdx","song","playStatus","pagePath","songId","playType","songArr"]),Object(c["c"])("player/user",["userToken"])),mounted:function(){var t=this;this.$nextTick(function(){t.mouseBinds()})},beforeDestroy:function(){this.mouseUnbinds()},methods:Object(l["a"])({mouseBinds:function(){document.addEventListener("mousemove",this.mouseMove),document.addEventListener("mouseup",this.mouseUp)},mouseUnbinds:function(){document.removeEventListener("mousemove",this.mouseMove),document.removeEventListener("mouseup",this.mouseUp)},mouseDown:function(t){this.move.status=!0,this.move.startX=t.clientX,this.move.left=this.$refs.barReal.clientWidth},mouseMove:function(t){if(!this.move.status)return!1;var e=t.clientX,s=e-this.move.startX,n=Math.min(this.$refs.barTotal.clientWidth,Math.max(0,this.move.left+s));this.moveSilde(n)},mouseUp:function(t){!0===this.move.status&&(t.stopPropagation(),this.$refs.audio.currentTime=this.$refs.barReal.clientWidth/this.$refs.barTotal.clientWidth*this.duration,this.$refs.audio.currentTim!==this.duration&&!1===this.playStatus&&this.handleSetPlayStatus(!0),this.move.status=!1)},getDuration:function(){this.duration=this.$refs.audio.duration},audioProcess:function(){this.move.status||(this.nowDuration=this.$refs.audio.currentTime,this.moveSilde(this.$refs.audio.currentTime/this.duration*this.$refs.barTotal.clientWidth))},playEnd:function(){var t=this;if(this.playType)if("single"===this.playType)this.$refs.audio.load(),this.$nextTick(function(){t.$refs.audio.play()});else if("all"===this.playType){var e=JSON.parse(this.songArr).length;if(r()(this.songIdx)===e-1)this.handleSetSongIdx(0);else{var s=r()(this.songIdx)+1;this.handleSetSongIdx(s)}}else{var n=JSON.parse(this.songArr).length;if(r()(this.songIdx)===n-1)this.handleSetPlayStatus(!1);else{var a=r()(this.songIdx)+1;this.handleSetSongIdx(a)}}else{var i=JSON.parse(this.songArr).length;if(r()(this.songIdx)===i-1)this.handleSetPlayStatus(!1);else{var o=r()(this.songIdx)+1;this.handleSetSongIdx(o)}}},moveSilde:function(t,e){this.$refs.barReal.style.width="".concat(t,"px")},loveMusic:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e={ids:this.songId},t.next=3,this.$http.post("/user/song/love",e);case 3:s=t.sent,!0===s.status?(alert("添加收藏成功"),this.$router.push("/song/love")):alert(s.msg);case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),deloveMusic:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e={songId:this.songId},t.next=3,this.$http.post("/user/song/dellove",e);case 3:s=t.sent,!0===s.status?location.reload():alert(s.msg);case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),played:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e={songId:this.songId},t.next=3,this.$http.post("/index/song/played",e);case 3:t.sent;case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),setType:function(){var t={single:"all",all:"default",default:"single"};this.playType?(console.log(t[this.playType]),this.handleSetPlayType(t[this.playType])):(console.log(this.playType),this.handleSetPlayType("single"))}},Object(c["b"])("player/song",["handleSetPlayStatus","handleSetSongIdx","handleSetPlayType"])),watch:{playStatus:function(t){var e=this;t?this.$nextTick(function(){e.$refs.audio.play(),e.played()}):this.$refs.audio.pause()},songIdx:function(t){var e=this;"undefined"!==typeof t&&(this.$refs.audio.load(),this.$nextTick(function(){e.handleSetPlayStatus(!0),e.$refs.audio.play(),e.played()}))},$route:function(t,e){this.pathName=t.name}}},h=u,p=(s("ec9c"),s("2877")),d=Object(p["a"])(h,n,a,!1,null,"66a01557",null);e["default"]=d.exports},ec9c:function(t,e,s){"use strict";var n=s("92c9"),a=s.n(n);a.a}}]);
//# sourceMappingURL=chunk-da42a49a.f63665fb.js.map